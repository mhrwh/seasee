{% extends "base.html" %}
{% block title %}ユーザーの一覧{% endblock %}
{% block content %}
<h2 class="head">ユーザーの一覧</h2>

<div id="regions_div" class="mx-auto" style="width: 900px; height: 500px;"></div>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script>
    google.charts.load('current', {
        'packages':[
            'geochart'
        ],
        'mapsApiKey': 'AIzaSyDWgY6Qe3SYmXWnQScjSoP3JcfPe-SWfzI'
    });
    google.charts.setOnLoadCallback(drawRegionsMap);
    // クリック
    function selectHandler(reg) {
        console.log(reg.region);
        window.location.href = '/prefectures/' + reg.region;
    }
    function drawRegionsMap() {
        // 国名コードと国の表示名の配列をここで読み込んでください。
        const codes = [
        ['Prefecture', 'Value', {role: 'tooltip', p:{html:true}}],
            [{v:"北海道"}, 1, 'aaa'],
            [{v:"青森"}, 0, '']
        ];
        const data = google.visualization.arrayToDataTable(codes);
        const options = {
            defaultColor:'#3CB371',
            region: 'JP',
            resolution: 'provinces',
            colorAxis:{
                colors:['white','red'],
                minValue: 0,
                maxValue:1
            },
            tooltip: {
                isHtml: true
            }
        };
        const chart = new google.visualization.GeoChart(document.getElementById('regions_div'));
        google.visualization.events.addListener(chart, 'regionClick', selectHandler);
        chart.draw(data, options);
    }
    document.getElementById('regions_div').addEventListener('mouseover', function (e){
    })
</script>
{% endblock %}